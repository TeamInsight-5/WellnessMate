<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>외과 응급도 평가</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/surgery.css}">
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=48475be29fda82ad232749bbb6f73ea1&libraries=services"></script>
</head>
<body>

<main>
    <div class="survey-container">
        <div class="progress-bar-container">
            <span class="progress-text">응급도 평가 진행률</span>
            <div class="progress-bar">
                <div class="progress" style="width: 20%;"></div>
            </div>
            <span class="step-text">1/5</span>
        </div>

        <div id="step1" class="survey-step active">
            <h2>어떤 종류의 외상을 입으셨나요?</h2>
            <form id="injuryForm">
                <div class="checkbox-group">
                    <label><input type="checkbox" name="injuries" value="cut"> 칼이나 날카로운 물체에 베임</label>
                    <label><input type="checkbox" name="injuries" value="burn"> 화상</label>
                    <label><input type="checkbox" name="injuries" value="fall"> 낙상/추락</label>
                    <label><input type="checkbox" name="injuries" value="traffic_accident"> 교통사고</label>
                    <label><input type="checkbox" name="injuries" value="fracture"> 골절 의심</label>
                    <label><input type="checkbox" name="injuries" value="bruise"> 타박상</label>
                    <label><input type="checkbox" name="injuries" value="sprain"> 염좌/삠</label>
                    <label><input type="checkbox" name="injuries" value="foreign_body"> 이물질 박힘</label>
                    <label><input type="checkbox" name="injuries" value="animal_bite"> 동물에게 물림</label>
                    <label><input type="checkbox" name="injuries" value="penetrating_injury"> 관통상</label>
                    <label><input type="checkbox" name="injuries" value="head_trauma"> 머리 외상</label>
                    <label><input type="checkbox" name="injuries" value="facial_trauma"> 안면부 외상</label>
                </div>
            </form>
            <div class="button-group">
                <button type="button" class="btn-prev" onclick="goToMainPage()">이전</button>
                <button type="button" class="btn-next">다음</button>
            </div>
        </div>

        <div id="step2" class="survey-step" style="display: none;">
            <h2>외상 부위 사진을 촬영하여 AI 분석을 받아보세요</h2>
            <div class="image-upload-section">
                <p class="privacy-note">
                    <span class="privacy-icon">🔒</span>
                    <span class="privacy-text">개인정보 보호 안내</span>
                    <br>
                    <small>업로드된 사진은 진단 목적으로만 사용되며, 분석 완료 후 즉시 삭제됩니다. 얼굴이나 개인 식별 정보가 포함되지 않도록 주의해주세요.</small>
                </p>
                <div class="upload-buttons">
                    <button type="button" class="btn-upload">사진 업로드</button>
                    <button type="button" class="btn-camera">카메라 촬영</button>
                </div>
            </div>
            <div class="button-group">
                <button type="button" class="btn-prev">이전</button>
                <button type="button" class="btn-next">다음</button>
            </div>
        </div>

        <div id="step3" class="survey-step" style="display: none;">
            <h2>출혈의 정도는 어떠한가요?</h2>
            <form id="bleedingForm">
                <div class="radio-group">
                    <label><input type="radio" name="bleeding" value="none"> 출혈 없음</label>
                    <label><input type="radio" name="bleeding" value="slight"> 약간의 출혈 (자연 지혈 가능)</label>
                    <label><input type="radio" name="bleeding" value="continuous"> 지속적인 출혈 (압박 지혈 필요)</label>
                    <label><input type="radio" name="bleeding" value="severe"> 심한 출혈 (멈추지 않음)</label>
                    <label><input type="radio" name="bleeding" value="spurting"> 분수처럼 솟는 출혈</label>
                </div>
            </form>
            <div class="button-group">
                <button type="button" class="btn-prev">이전</button>
                <button type="button" class="btn-next">다음</button>
            </div>
        </div>

        <div id="step4" class="survey-step" style="display: none;">
            <h2>통증과 움직임은 어떠한가요?</h2>
            <form id="painForm">
                <div class="radio-group">
                    <label><input type="radio" name="pain" value="mild"> 가벼운 통증, 움직임 가능</label>
                    <label><input type="radio" name="pain" value="moderate"> 보통 통증, 움직임 제한</label>
                    <label><input type="radio" name="pain" value="severe"> 심한 통증, 움직임 불가</label>
                    <label><input type="radio" name="pain" value="unconscious"> 의식 잃음</label>
                </div>
            </form>
            <div class="button-group">
                <button type="button" class="btn-prev">이전</button>
                <button type="button" class="btn-next">다음</button>
            </div>
        </div>

        <div id="step5" class="survey-step" style="display: none;">
            <h2>현재 상태를 확인해주세요</h2>
            <form id="statusForm">
                <div class="checkbox-group">
                    <label><input type="checkbox" name="status" value="normal_breathing"> 정상 호흡</label>
                    <label><input type="checkbox" name="status" value="fast_breathing"> 빠른 호흡</label>
                    <label><input type="checkbox" name="status" value="respiratory_distress"> 호흡 곤란</label>
                    <label><input type="checkbox" name="status" value="normal_pulse"> 정상 맥박</label>
                    <label><input type="checkbox" name="status" value="fast_pulse"> 빠른 맥박</label>
                    <label><input type="checkbox" name="status" value="weak_pulse"> 약한 맥박</label>
                    <label><input type="checkbox" name="status" value="nausea"> 구토/메스꺼움</label>
                    <label><input type="checkbox" name="status" value="dizziness"> 어지러움</label>
                    <label><input type="checkbox" name="status" value="decreased_consciousness"> 의식 저하</label>
                </div>
            </form>
            <div class="button-group">
                <button type="button" class="btn-prev">이전</button>
                <button type="button" class="btn-submit">응급도 평가</button>
            </div>
        </div>

        <div id="result" class="survey-step" style="display: none;">
            <div class="result-box">
                <h2>응급도 평가 결과</h2>
                <div class="emergency-score">
                    <span id="riskLevel" class="risk-level"></span>
                    <p class="score-text">응급도 점수 <span id="scoreValue">20/30</span></p>
                    <div class="score-bar">
                        <div class="score-progress" id="scoreProgress"></div>
                    </div>
                    <p class="emergency-message" id="emergencyMessage"></p>
                    <p class="emergency-guide" id="emergencyGuide"></p>
                </div>
            </div>

            <div class="detail-result-section">
                <h4>상세 평가 결과</h4>
                <div id="detailResultList">
                </div>
            </div>

            <div class="recommendation-section">
                <h4>추천 진료과 TOP 3</h4>
                <div id="recommendedDepartments">
                </div>
            </div>

            <div class="nearby-hospital-section">
                <h4>주변 병원 찾기</h4>
                <div id="map-container">
                </div>
                <div id="nearby-hospitals-list" class="hospital-grid">
                </div>
            </div>
        </div>
    </div>
</main>

<script th:src="@{/js/surgery.js}"></script>
</body>
</html>