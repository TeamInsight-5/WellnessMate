<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내과 상담</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/internalmedicine.css}">
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=48475be29fda82ad232749bbb6f73ea1&libraries=services"></script>
</head>
<body>

<div class="main-wrapper">
    <div th:replace="~{main/mainPage:: header}"></div>

    <div class="internal-medicine-header">
        <div class="header-content">
            <span class="header-icon">🩺</span>
            <h1>내과 상담</h1>
            <p>
                체계적인 자가진단을 통해 현재 건강상태를 확인하고 적절한 의료 서비스를 안내받으세요
            </p>
        </div>
    </div>

    <div class="content-container">
        <div class="survey-container">
            <div class="progress-bar-container">
                <span class="progress-text">진행률</span>
                <div class="progress-bar">\
                    <div class="progress" style="width: 25%;"></div>
                </div>
                <span class="step-text">1/4</span>
            </div>

            <div id="step1" class="survey-step active">
                <h2>현재 느끼는 증상을 모두 선택해주세요</h2>
                <form id="symptomForm">
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="symptoms" value="fever"> 발열 (37.5도 이상)</label>
                        <label><input type="checkbox" name="symptoms" value="cough"> 기침</label>
                        <label><input type="checkbox" name="symptoms" value="sore_throat"> 목 아픔</label>
                        <label><input type="checkbox" name="symptoms" value="headache"> 두통</label>
                        <label><input type="checkbox" name="symptoms" value="fatigue"> 피로감</label>
                        <label><input type="checkbox" name="symptoms" value="nausea"> 구토/메스꺼움</label>
                        <label><input type="checkbox" name="symptoms" value="diarrhea"> 설사</label>
                        <label><input type="checkbox" name="symptoms" value="stomach_ache"> 복통</label>
                        <label><input type="checkbox" name="symptoms" value="chest_pain"> 가슴 통증</label>
                        <label><input type="checkbox" name="symptoms" value="respiratory_disease"> 호흡곤란</label>
                        <label><input type="checkbox" name="symptoms" value="dizziness"> 어지러움</label>
                        <label><input type="checkbox" name="symptoms" value="palpitation"> 심계항진</label>
                        <label><input type="checkbox" name="symptoms" value="frequent_urination"> 빈뇨</label>
                        <label><input type="checkbox" name="symptoms" value="thirst"> 갈증</label>
                    </div>
                </form>
                <div class="button-group">
                    <button type="button" class="btn-prev">이전</button>
                    <button type="button" class="btn-next">다음</button>
                </div>
            </div>

            <div id="step2" class="survey-step" style="display: none;">
                <h2>증상이 지속된 기간은 얼마나 되나요?</h2>
                <form id="durationForm">
                    <div class="radio-group">
                        <label><input type="radio" name="duration" value="1_day" required> 1일 이내</label>
                        <label><input type="radio" name="duration" value="2-3_days"> 2-3일</label>
                        <label><input type="radio" name="duration" value="1_week"> 1주일</label>
                        <label><input type="radio" name="duration" value="2_weeks+"> 2주 이상</label>
                    </div>
                </form>
                <div class="button-group">
                    <button type="button" class="btn-prev">이전</button>
                    <button type="button" class="btn-next">다음</button>
                </div>
            </div>

            <div id="step3" class="survey-step" style="display: none;">
                <h2>증상의 심각도는 어느 정도인가요?</h2>
                <form id="severityForm">
                    <div class="radio-group">
                        <label><input type="radio" name="severity" value="mild" required> 가벼움 (일상생활 가능)</label>
                        <label><input type="radio" name="severity" value="moderate"> 보통 (일상생활에 지장)</label>
                        <label><input type="radio" name="severity" value="severe"> 심함 (일상생활 불가)</label>
                        <label><input type="radio" name="severity" value="critical"> 매우 심함 (응급처치 필요)</label>
                    </div>
                </form>
                <div class="button-group">
                    <button type="button" class="btn-prev">이전</button>
                    <button type="button" class="btn-next">다음</button>
                </div>
            </div>

            <div id="step4" class="survey-step" style="display: none;">
                <h2>기존 병력이나 복용 중인 약물이 있나요?</h2>
                <form id="historyForm">
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="history" value="diabetes"> 당뇨병</label>
                        <label><input type="checkbox" name="history" value="hypertension"> 고혈압</label>
                        <label><input type="checkbox" name="history" value="heart_disease"> 심장병</label>
                        <label><input type="checkbox" name="history" value="kidney_disease"> 신장병</label>
                        <label><input type="checkbox" name="history" value="liver_disease"> 간질환</label>
                        <label><input type="checkbox" name="history" value="thyroid_disease"> 갑상선 질환</label>
                        <label><input type="checkbox" name="history" value="medication"> 정기 복용 약물 있음</label>
                        <label><input type="checkbox" name="history" value="none"> 없음</label>
                    </div>
                </form>
                <div class="button-group">
                    <button type="button" class="btn-prev">이전</button>
                    <button type="button" class="btn-submit">결과 보기</button>
                </div>
            </div>

            <div id="result" class="survey-step" style="display: none;">
                <h2>건강상태 진단 결과</h2>
                <div class="result-card">
                    <div class="result-header">
                        <h3 id="resultTitle"></h3>
                        <span class="urgency-badge" id="urgencyBadge"></span>
                    </div>
                    <div class="risk-score">
                        <p>위험도 점수</p>
                        <div class="progress-bar-small">
                            <div class="progress-fill" id="riskProgress"></div>
                        </div>
                        <span id="riskScore"></span>
                    </div>
                    <p id="resultMessage"></p>
                </div>

                <div class="recommendation-section">
                    <h4>추천 진료과</h4>
                    <div id="recommendedDepartments"></div>
                </div>

                <div class="expected-disease">
                    <h4>예상 질환명</h4>
                    <div id="expectedDisease"></div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn-primary" onclick="restartSurvey()">다시 진단하기</button>
                    <button type="button" class="btn-secondary" onclick="goToMainPage()">메인으로 돌아가기</button>
                </div>
            </div>
        </div>

        <div class="health-tips-section">
            <div class="health-tip">
                <h4><span class="tip-icon">✔️</span> 정확한 증상 체크</h4>
                <p>증상의 정확한 기록은 올바른 진단의 첫걸음입니다. 언제부터, 어떤 상황에서 증상이 시작되었는지 기억해보세요.</p>
            </div>
            <div class="health-tip">
                <h4><span class="tip-icon">⏱️</span> 조기 발견의 중요성</h4>
                <p>대부분의 질병은 조기에 발견할수록 치료 효과가 좋습니다. 작은 증상도 지속된다면 전문의와 상담하세요.</p>
            </div>
            <div class="health-tip">
                <h4><span class="tip-icon">✅</span> 건강한 생활습관</h4>
                <p>규칙적인 운동, 균형 잡힌 식사, 충분한 수면은 모든 질병의 기본적인 예방법입니다.</p>
            </div>
        </div>
    </div>

    <div class="nearby-hospital-section">
        <div class="nearby-hospital-header">
            <h4>주변 병원 찾기</h4>
        </div>
        <div id="map-container"></div>
        <div id="nearby-hospitals-list" class="hospital-grid"></div>
    </div>
</div>

<script th:src="@{/js/internalmedicine.js}"></script>
</body>
</html>